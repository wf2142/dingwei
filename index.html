<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8">
	<title>在客户端读取cookie</title>
	<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=1GsiPWj4EDETYBO0IZ8C1izD"></script>
	<style type="text/css">
		#allmap{
			width: 500px;height: 300px;
			border: 1px solid red;
		}
	</style>
</head>
<body>
	

	<input type='button' value='定位' onclick="read()">
	<div id='s'></div>
	<div id="allmap"></div>
	<script type="text/javascript">
		function read(){
			var s = document.getElementById('s');
			if(navigator.geolocation){
				navigator.geolocation.getCurrentPosition(function(p){
						console.log(p);
						var map = new BMap.Map('allmap');
						var wd= p.coords.latitude;
						var jd=p.coords.longitude;
						var point = new BMap.Point(wd, jd);
						map.centerAndZoom(point,15);
					},
					function(err){
						console.log(err);
					}
				);

				var map = new BMap.Map('allmap');
						
				var point = new BMap.Point(116.404, 39.915);

				map.centerAndZoom(point,15);
				var marker = new BMap.Marker(point);
				map.addOverlay(marker);

			}
		}

	</script>
</body>
</html>